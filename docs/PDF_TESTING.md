# PDF 功能測試指南 | PDF Feature Testing Guide

## 🧪 測試清單 | Testing Checklist

### 前置條件 | Prerequisites
- [x] 開發伺服器正在運行 (`npm run dev`)
- [x] 已登入系統
- [x] 至少有一個包含項目的報價單

### 功能測試 | Functional Tests

#### ✅ 1. PDF 下載按鈕顯示
- [ ] 進入報價單詳情頁面
- [ ] 確認右上角顯示「下載 PDF」按鈕
- [ ] 按鈕位於狀態徽章旁邊

#### ✅ 2. 下拉選單功能
- [ ] 點擊「下載 PDF」按鈕
- [ ] 確認顯示三個選項：
  - 🇹🇼 下載中文版 PDF
  - 🇬🇧 下載英文版 PDF
  - 🌏 下載雙語版 PDF
- [ ] 點擊選單外部可關閉選單

#### ✅ 3. 中文版 PDF
- [ ] 點擊「下載中文版 PDF」
- [ ] 確認 PDF 下載成功
- [ ] 開啟 PDF 檢查：
  - [ ] 標題為「報價單」
  - [ ] 所有欄位為中文
  - [ ] 客戶名稱、地址為中文
  - [ ] 產品名稱、描述為中文
  - [ ] 日期格式正確 (zh-TW)
  - [ ] 金額格式正確

#### ✅ 4. 英文版 PDF
- [ ] 點擊「下載英文版 PDF」
- [ ] 確認 PDF 下載成功
- [ ] 開啟 PDF 檢查：
  - [ ] 標題為「Quotation」
  - [ ] 所有欄位為英文
  - [ ] 客戶名稱、地址為英文
  - [ ] 產品名稱、描述為英文
  - [ ] 日期格式正確 (en-US)
  - [ ] 金額格式正確

#### ✅ 5. 雙語版 PDF
- [ ] 點擊「下載雙語版 PDF」
- [ ] 確認 PDF 下載成功
- [ ] 開啟 PDF 檢查：
  - [ ] 客戶名稱同時顯示中英文 (格式: 中文 / English)
  - [ ] 產品名稱同時顯示中英文
  - [ ] 地址同時顯示中英文
  - [ ] 其他欄位根據選擇的語言顯示

#### ✅ 6. PDF 內容完整性
- [ ] 報價單號碼正確
- [ ] 發出日期正確
- [ ] 有效期限正確
- [ ] 客戶資訊完整
  - [ ] 姓名
  - [ ] Email
  - [ ] 電話（如有）
  - [ ] 地址（如有）
- [ ] 產品明細表正確
  - [ ] 產品名稱
  - [ ] 數量
  - [ ] 單價
  - [ ] 折扣
  - [ ] 小計
- [ ] 金額計算正確
  - [ ] 小計
  - [ ] 稅金 (稅率%)
  - [ ] 總計
- [ ] 備註顯示正確（如有）
- [ ] 狀態徽章顯示正確

#### ✅ 7. 狀態徽章測試
測試不同狀態的報價單：
- [ ] Draft (草稿) - 灰色
- [ ] Sent (已發送) - 藍色
- [ ] Accepted (已接受) - 綠色
- [ ] Rejected (已拒絕) - 紅色

#### ✅ 8. 邊界情況測試
- [ ] 沒有產品項目的報價單
- [ ] 大量產品項目 (>10 項)
- [ ] 沒有備註的報價單
- [ ] 沒有客戶電話的報價單
- [ ] 沒有客戶地址的報價單
- [ ] 產品沒有描述
- [ ] 產品沒有折扣

#### ✅ 9. API 端點測試
使用瀏覽器或 curl 測試：

```bash
# 中文版
curl -o test-zh.pdf "http://localhost:3001/api/quotations/{quotation-id}/pdf?locale=zh"

# 英文版
curl -o test-en.pdf "http://localhost:3001/api/quotations/{quotation-id}/pdf?locale=en"

# 雙語版
curl -o test-both.pdf "http://localhost:3001/api/quotations/{quotation-id}/pdf?locale=zh&both=true"
```

#### ✅ 10. 權限測試
- [ ] 未登入用戶無法下載 PDF (返回 401)
- [ ] 無法下載其他用戶的報價單 PDF (返回 404)

#### ✅ 11. 錯誤處理
- [ ] 不存在的報價單 ID (應顯示錯誤訊息)
- [ ] 無效的語言參數 (應使用預設值)
- [ ] 網路錯誤時的處理

#### ✅ 12. UI/UX 測試
- [ ] 下載時顯示載入動畫
- [ ] 下載完成後按鈕恢復正常
- [ ] 下載失敗時顯示錯誤提示
- [ ] 按鈕在不同螢幕尺寸下顯示正常
- [ ] 按鈕在不同語言環境下正常運作

### 效能測試 | Performance Tests

#### ✅ 1. 生成速度
- [ ] 小型報價單 (1-3 項) < 2 秒
- [ ] 中型報價單 (4-10 項) < 3 秒
- [ ] 大型報價單 (10+ 項) < 5 秒

#### ✅ 2. 檔案大小
- [ ] 基本報價單 < 50KB
- [ ] 包含大量項目 < 100KB

### 相容性測試 | Compatibility Tests

#### ✅ 瀏覽器
- [ ] Chrome/Edge
- [ ] Firefox
- [ ] Safari

#### ✅ PDF 閱讀器
- [ ] Adobe Acrobat Reader
- [ ] 瀏覽器內建 PDF 檢視器
- [ ] Preview (macOS)
- [ ] Foxit Reader

### 列印測試 | Print Tests
- [ ] PDF 列印在 A4 紙張上正確顯示
- [ ] 頁邊距適當
- [ ] 內容不會被裁切
- [ ] 多頁報價單分頁正確

## 🐛 已知問題 | Known Issues

### 字體支援
- ⚠️ 當前使用 Helvetica 字體，對中文支援有限
- 💡 **解決方案**: 需要註冊 Noto Sans TC 字體（見 PDF_EXPORT.md）

### 長文本處理
- ⚠️ 超長產品描述可能導致排版問題
- 💡 **解決方案**: 建議產品描述控制在 200 字以內

## 📊 測試結果記錄 | Test Results Log

### 測試日期: 2025-10-16
- **測試者**: _______
- **環境**: Development (localhost:3001)
- **瀏覽器**: _______
- **版本**: 0.3.0

#### 測試結果
- ✅ 通過: _____ 項
- ❌ 失敗: _____ 項
- ⚠️ 待修復: _____ 項

#### 問題記錄
1. _______
2. _______
3. _______

## 🔄 下一步行動 | Next Steps

- [ ] 完成所有測試項目
- [ ] 記錄發現的問題
- [ ] 提交 bug 報告
- [ ] 規劃改進方案

---

**版本**: 0.3.0
**最後更新**: 2025-10-16
